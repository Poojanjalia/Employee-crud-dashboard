<div class="dashboard-root">
  <h1>Dashboard</h1>

  <!-- Metrics Section -->
  <div class="dashboard-metrics">
    <mat-card class="metric-card">
      <div class="metric-icon"><mat-icon>groups</mat-icon></div>
      <div class="metric-title">Total Employees</div>
      <div class="metric-value">{{ totalEmployees }}</div>
    </mat-card>
    <mat-card class="metric-card">
      <div class="metric-icon"><mat-icon>person_add</mat-icon></div>
      <div class="metric-title">New This Month</div>
      <div class="metric-value">{{ newThisMonth }}</div>
    </mat-card>
    <mat-card class="metric-card">
      <div class="metric-icon"><mat-icon>apps</mat-icon></div>
      <div class="metric-title">Departments</div>
      <div class="metric-value">{{ departmentss }}</div>
    </mat-card>
    <mat-card class="metric-card">
      <div class="metric-icon"><mat-icon>attach_money</mat-icon></div>
      <div class="metric-title">Average Salary</div>
      <div class="metric-value">{{ avgSalary | currency:'USD':'symbol':'1.0-0' }}</div>
    </mat-card>
  </div>

  <!-- Charts Section -->
  <div class="dashboard-charts">
    <mat-card class="chart-card">
      <div class="chart-title">Employees by Department</div>
      <!-- ADDED *ngIf HERE -->
      <div *ngIf="barChartData" style="display: block;">
        <canvas baseChart [data]="barChartData" [type]="barChartType" [options]="barChartOptions">
        </canvas>
      </div>
      <div *ngIf="!barChartData" class="loading-text">Loading Chart...</div>
    </mat-card>

    <mat-card class="chart-card">
      <div class="chart-title">New Hires Trend</div>
      <!-- ADDED *ngIf HERE -->
      <div *ngIf="lineChartData" style="display: block;">
        <canvas baseChart [data]="lineChartData" [type]="lineChartType" [options]="lineChartOptions">
        </canvas>
      </div>
      <div *ngIf="!lineChartData" class="loading-text">Loading Chart...</div>
    </mat-card>
  </div>

  <!-- Actions Section -->
  <div class="dashboard-actions">
    <button mat-raised-button color="primary" [routerLink]="['/employees/new']">
      <mat-icon>add</mat-icon>
      Add Employee
    </button>
    <button mat-stroked-button color="primary" [routerLink]="['/employees']">
      View All Employees
    </button>
  </div>

  <!-- Recent Employees Section (COMPLETED) -->
  <mat-card class="recent-employees-card">
    <div class="recent-title">Recent Employees</div>
    <table class="recent-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Department</th>
          <th>Role</th>
          <th>Joined</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let emp of recentEmployees">
          <td>{{ emp.fullName }}</td>
          <td>{{ emp.department }}</td>
          <td>{{ emp.jobTitle }}</td>
          <td>{{ emp.hireDate | date:'mediumDate' }}</td>
        </tr>
        <tr *ngIf="recentEmployees.length === 0">
          <td colspan="4">No employees found.</td>
        </tr>
      </tbody>
    </table>
  </mat-card>
</div>